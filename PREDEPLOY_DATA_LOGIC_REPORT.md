# PREDEPLOY DATA LOGIC REPORT

## –û—Ç—á—ë—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —É–ª—É—á—à–µ–Ω–∏–π –ª–æ–≥–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –∏–º–ø–æ—Ä—Ç–∞

**–î–∞—Ç–∞:** 2025-10-05
**–ü—Ä–æ–µ–∫—Ç:** BoltPromo
**–ê–≤—Ç–æ—Ä:** Claude Code

---

## A. –ê–≤—Ç–æ–≥–æ—Ä—è—á–∏–µ –∏ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ

### A1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–≥–æ—Ä—è—á–∏—Ö (is_hot)

#### ‚úÖ –ß—Ç–æ –±—ã–ª–æ –Ω–∞–π–¥–µ–Ω–æ

–î–æ –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã:
- –§–ª–∞–≥ `is_hot` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É (action `make_hot`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ª–æ–≥–∏–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è "–≥–æ—Ä—è—á–∏—Ö" –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ
- –¢–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –≤ `HotPromoCard` (—Å—Ç—Ä–æ–∫–∞ 391)
- –í –æ–±—ã—á–Ω–æ–π `PromoCard` —Ç–∞–π–º–µ—Ä –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª ‚úì

#### ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–§–∞–π–ª:** `backend/core/tasks.py:274-326`

–î–æ–±–∞–≤–ª–µ–Ω–∞ Celery-–∑–∞–¥–∞—á–∞ `update_auto_hot_promos()`:

```python
@shared_task(bind=True, max_retries=2, soft_time_limit=120, time_limit=180)
def update_auto_hot_promos(self):
    """
    –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–ª–∞–≥–∞ is_hot –¥–ª—è –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤:
    - –ê–∫—Ç–∏–≤–Ω—ã–µ –∏ –Ω–µ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ
    - –ò—Å—Ç–µ–∫–∞—é—Ç –º–µ–Ω–µ–µ —á–µ–º —á–µ—Ä–µ–∑ 72 —á–∞—Å–∞
    - –ò–º–µ—é—Ç —Ä–æ—Å—Ç –∫–ª–∏–∫–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
    """
```

**–õ–æ–≥–∏–∫–∞:**
1. –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç `is_hot` —É –≤—Å–µ—Ö –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∫—Ä–∏—Ç–µ—Ä–∏—è–º (–Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ, –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ, –∏—Å—Ç–µ–∫–∞—é—Ç >72—á)
2. –ù–∞—Ö–æ–¥–∏—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤: `is_active=True`, `expires_at > now`, `expires_at <= now + 72h`
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∫–ª–∏–∫–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π —á–µ—Ä–µ–∑ `DailyAgg`
4. –ï—Å–ª–∏ –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã 1 –∫–ª–∏–∫ –∑–∞ –Ω–µ–¥–µ–ª—é ‚Üí —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `is_hot=True`

**–§–∞–π–ª:** `backend/core/management/commands/update_auto_hot.py`

–î–æ–±–∞–≤–ª–µ–Ω–∞ management-–∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:

```bash
python manage.py update_auto_hot
```

#### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

1. –¢–∞–π–º–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ `HotPromoCard.tsx:391`:
   ```tsx
   {cardModel.isHot && promo.expires_at && (
     <CountdownTimer expiresAt={promo.expires_at} className="hidden sm:inline-flex" />
   )}
   ```

2. –í `PromoCard.tsx` —Ç–∞–π–º–µ—Ä –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ grep)

3. –ê–≤—Ç–æ–≥–æ—Ä—è—á–∏–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ –∞–∫—Ç–∏–≤–Ω—ã–º –∏ –Ω–µ–∏—Å—Ç–µ–∫—à–∏–º –ø—Ä–æ–º–æ–∫–æ–¥–∞–º

**–ö–æ–º–º–∏—Ç:** `feat(hot): add auto-hot logic (expires <72h + clicks growth)`

---

### A2. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ ¬´–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ¬ª

#### ‚úÖ –ü—Ä–∞–≤–∏–ª–∞ –∑–∞–∫–∞–∑—á–∏–∫–∞ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å—Ç—Ä–æ–≥–æ):

1. **–°–Ω–∞—á–∞–ª–∞**: –æ—Ñ—Ñ–µ—Ä—ã —Å –±–µ–π–¥–∂–∞–º–∏ (`is_hot=True` –ò–õ–ò `is_recommended=True`)
2. **–ó–∞—Ç–µ–º**: –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π –∑–∞ 7 –¥–Ω–µ–π (`usage_7d` = –∫–ª–∏–∫–∏ + –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è)
3. **–ü–æ—Ç–æ–º**: –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ —Å–≤–µ–∂–µ—Å—Ç–∏ (`-created_at`)

#### ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–§–∞–π–ª:** `backend/core/filters.py:204-245`

–†–∞—Å—à–∏—Ä–µ–Ω `PromoCodeOrderingFilter.filter_queryset()`:

```python
if ordering_param == 'popular' or ordering_param == '-popular':
    # –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è usage_7d (–∫–ª–∏–∫–∏ + –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞ 7 –¥–Ω–µ–π)
    queryset = queryset.annotate(
        usage_7d=Sum(
            Case(
                When(
                    dailyagg__date__gte=week_ago,
                    dailyagg__event_type__in=['click', 'copy'],
                    then='dailyagg__count'
                ),
                default=Value(0),
                output_field=IntegerField()
            )
        )
    )

    # –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è has_badge (is_hot OR is_recommended)
    queryset = queryset.annotate(
        has_badge=Case(
            When(models.Q(is_hot=True) | models.Q(is_recommended=True), then=Value(1)),
            default=Value(0),
            output_field=IntegerField()
        )
    )

    # –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: badges first ‚Üí usage_7d ‚Üí freshness
    queryset = queryset.order_by('-has_badge', '-usage_7d', '-created_at')
```

**–§–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã:**
- `backend/core/views.py:312` - PromoCodeListView
- `backend/core/views.py:77` - CategoryPromocodesView
- `backend/core/views.py:194` - StorePromocodesView

–î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `ordering_fields = [..., 'popular']`

**API Usage:**
```
GET /api/v1/promocodes/?ordering=popular
```

**–ö–æ–º–º–∏—Ç:** `feat(api): add 'popular' ordering (badges ‚Üí usage_7d ‚Üí freshness)`

---

## B. ¬´–î—Ä—É–≥–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ—Ç [–º–∞–≥–∞–∑–∏–Ω]¬ª

### ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

**–§–∞–π–ª:** `frontend/src/lib/api.ts:751-806`

**–î–æ:**
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: `-is_recommended,-views_count`
- –õ–∏–º–∏—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `6`
- –õ–æ–≥–∏–∫–∞: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `store.slug`, –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `promoId`

**–ü–æ—Å–ª–µ:**
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: `popular` (badges ‚Üí usage_7d ‚Üí freshness)
- –õ–∏–º–∏—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `12`
- –õ–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `store.slug`, –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `promoId`

```typescript
export async function getRelatedPromocodes(
  promoId: number,
  storeSlug?: string,
  categorySlug?: string,
  limit: number = 12
): Promise<Promocode[]> {
  // ...
  const storePromos = await getPromocodes({
    store: storeSlug,
    page_size: limit + 1,
    ordering: 'popular'  // badges ‚Üí usage_7d ‚Üí freshness
  });
  // ...
}
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
1. –û—Ç–∫—Ä—ã—Ç—å –ª—é–±–æ–π –æ—Ñ—Ñ–µ—Ä
2. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç—å –¥–æ —Å–µ–∫—Ü–∏–∏ "–î—Ä—É–≥–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ—Ç [–º–∞–≥–∞–∑–∏–Ω]"
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ—Ñ—Ñ–µ—Ä—ã —Ç–æ–≥–æ –∂–µ –º–∞–≥–∞–∑–∏–Ω–∞
4. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–µ–∫—É—â–∏–π –æ—Ñ—Ñ–µ—Ä –∏—Å–∫–ª—é—á—ë–Ω
5. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ—Ä—è–¥–æ–∫: hot/recommended ‚Üí usage_7d ‚Üí —Å–≤–µ–∂–µ—Å—Ç—å

**–ö–æ–º–º–∏—Ç:** `fix(promos): 'other offers from store' uses popular ordering, limit 12`

---

## C. –ò–º–ø–æ—Ä—Ç ¬´–ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–π CSV¬ª (4 –ø–æ–ª—è)

### ‚úÖ –í—Ö–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç

| –ö–æ–ª–æ–Ω–∫–∞       | –û–ø–∏—Å–∞–Ω–∏–µ                                |
|---------------|-----------------------------------------|
| `store_name`  | –ù–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞ (–ø–æ–∏—Å–∫ case-insensitive) |
| `offer`       | –ü—Ä–æ–º–æ–∫–æ–¥ (SAVE20) –∏–ª–∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ |
| `conditions`  | –£—Å–ª–æ–≤–∏—è/–º–µ–ª–∫–∏–π —à—Ä–∏—Ñ—Ç                    |
| `date`        | –î–∞—Ç–∞ (–∏—Å—Ç–µ—á–µ–Ω–∏—è –∏–ª–∏ —Å—Ç–∞—Ä—Ç–∞)             |

### ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–§–∞–π–ª:** `backend/core/admin_import.py`

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è:

1. **–î–æ–±–∞–≤–ª–µ–Ω –≤—ã–±–æ—Ä –ø—Ä–æ—Ñ–∏–ª—è –∏–º–ø–æ—Ä—Ç–∞ (—Å—Ç—Ä–æ–∫–∏ 61-64):**
   ```python
   'import_profiles': [
       {'value': 'standard', 'label': '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π (12 –ø–æ–ª–µ–π)'},
       {'value': 'partner', 'label': '–ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–π CSV (4 –ø–æ–ª—è: store_name, offer, conditions, date)'},
   ]
   ```

2. **–§—É–Ω–∫—Ü–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞—Ç (—Å—Ç—Ä–æ–∫–∏ 19-46):**
   ```python
   def parse_date_flexible(date_str):
       """–ü–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç—ã –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö"""
       formats = [
           '%Y-%m-%d',      # 2025-12-31
           '%d.%m.%Y',      # 31.12.2025
           '%d/%m/%Y',      # 31/12/2025
           '%Y/%m/%d',      # 2025/12/31
           '%d-%m-%Y',      # 31-12-2025
       ]
       # + fallback –Ω–∞ dateutil.parser
   ```

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è (—Å—Ç—Ä–æ–∫–∏ 115-192):**

   **–ü–æ–ª–µ `store_name`:**
   - –ü–æ–∏—Å–∫ –º–∞–≥–∞–∑–∏–Ω–∞ –ø–æ `name__iexact` (case-insensitive)
   - –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí –æ—à–∏–±–∫–∞ –∫—Ä–∞—Å–Ω—ã–º —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π: "–ú–∞–≥–∞–∑–∏–Ω '...' –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ –º–∞–≥–∞–∑–∏–Ω –ø–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º."
   - –ù–∏–∫–∞–∫–æ–π –∞–≤—Ç–æ—Å–æ–∑–¥–∞—á–∏ –º–∞–≥–∞–∑–∏–Ω–æ–≤

   **–ü–æ–ª–µ `offer`:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ regex: `^[A-Z0-9-]{4,}$`
   - –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç ‚Üí `offer_type=coupon`, `code=offer`, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ "‚ö†Ô∏è affiliate_url –ø—É—Å—Ç–æ–π"
   - –ò–Ω–∞—á–µ ‚Üí –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º:
     - `['–∫—Ä–µ–¥–∏—Ç', '–±–∞–Ω–∫', '–∫—ç—à–±—ç–∫', '–∑–∞–π–º', '–∫–∞—Ä—Ç–∞']` ‚Üí `financial`
     - `['—Å–∫–∏–¥–∫–∞', '—Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∞', '%', '–ø—Ä–æ—Ü–µ–Ω—Ç']` ‚Üí `deal`
     - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Üí `deal`

   **–ü–æ–ª–µ `conditions`:**
   - –ú–∞–ø–ø–∏—Ç—Å—è –≤ `fine_print`

   **–ü–æ–ª–µ `date`:**
   - –ü–∞—Ä—Å–∏—Ç—Å—è —á–µ—Ä–µ–∑ `parse_date_flexible()`
   - –¢—Ä–∞–∫—Ç—É–µ—Ç—Å—è –∫–∞–∫ `expires_at`

4. **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π:**
   - ‚úÖ –ó–µ–ª—ë–Ω—ã–º: –≤–∞–ª–∏–¥–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (—Å–æ–∑–¥–∞–¥—É—Ç—Å—è/–æ–±–Ω–æ–≤—è—Ç—Å—è)
   - ‚ö†Ô∏è –ñ—ë–ª—Ç—ã–º: –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–ø—É—Å—Ç–æ–π affiliate_url, –ø—É—Å—Ç–∞—è –¥–∞—Ç–∞)
   - ‚ùå –ö—Ä–∞—Å–Ω—ã–º: –æ—à–∏–±–∫–∏ (–Ω–µ –Ω–∞–π–¥–µ–Ω –º–∞–≥–∞–∑–∏–Ω) —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏

**–ü—Ä–∏–º–µ—Ä –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–≥–æ CSV:**

```csv
store_name,offer,conditions,date
Ozon,SAVE20,–°–∫–∏–¥–∫–∞ –Ω–∞ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑,2025-12-31
Wildberries,–†–∞—Å–ø—Ä–æ–¥–∞–∂–∞ –¥–æ 50%,–¢–æ–ª—å–∫–æ —Å–µ–≥–æ–¥–Ω—è,31.12.2025
Tinkoff,–ö—ç—à–±—ç–∫ 10% –Ω–∞ –≤—Å—ë,–î–ª—è –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤,2025/12/31
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- Ozon: `coupon`, code=SAVE20, fine_print="–°–∫–∏–¥–∫–∞ –Ω–∞ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑", expires_at=2025-12-31
- Wildberries: `deal`, title="–†–∞—Å–ø—Ä–æ–¥–∞–∂–∞ –¥–æ 50%"
- Tinkoff: `financial`, title="–ö—ç—à–±—ç–∫ 10% –Ω–∞ –≤—Å—ë"

**–ö–æ–º–º–∏—Ç:** `feat(import): add 'Partner CSV' profile with 4 fields and smart type detection`

---

## D. –ò–Ω–¥–µ–∫—Å—ã –∏ –º–∞—Å—à—Ç–∞–± 500‚Äì1000

### D1. –ò–Ω–¥–µ–∫—Å—ã

#### ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã (–Ω–∞–π–¥–µ–Ω–æ)

**–§–∞–π–ª:** `backend/core/models.py:143-148`

PromoCode:
```python
indexes = [
    models.Index(fields=['is_active', 'expires_at']),
    models.Index(fields=['store', 'is_active']),
    models.Index(fields=['is_hot', 'is_active']),
    models.Index(fields=['-created_at']),
]
```

Event:
```python
indexes = [
    models.Index(fields=['event_type', 'created_at']),
    models.Index(fields=['promo', 'event_type']),
    models.Index(fields=['store', 'event_type']),
]
```

DailyAgg:
```python
indexes = [
    models.Index(fields=['date', 'event_type']),
]
```

#### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã

**–§–∞–π–ª:** `backend/core/migrations/0014_add_popular_ordering_indexes.py`

```python
operations = [
    # –°–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è has_badge (is_hot OR is_recommended)
    migrations.AddIndex(
        model_name='promocode',
        index=models.Index(
            fields=['is_hot', 'is_recommended', '-created_at'],
            name='core_promoc_hot_rec_created_idx'
        ),
    ),

    # –ò–Ω–¥–µ–∫—Å –¥–ª—è DailyAgg –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ usage_7d
    migrations.AddIndex(
        model_name='dailyagg',
        index=models.Index(
            fields=['promo', 'date', 'event_type'],
            name='core_dailya_promo_date_type_idx'
        ),
    ),

    # –ò–Ω–¥–µ–∫—Å –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏ –Ω–µ–∏—Å—Ç–µ–∫—à–∏—Ö –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
    migrations.AddIndex(
        model_name='promocode',
        index=models.Index(
            fields=['is_active', 'expires_at', '-created_at'],
            name='core_promoc_active_exp_created_idx'
        ),
    ),
]
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- `(is_hot, is_recommended, -created_at)` - —É—Å–∫–æ—Ä—è–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ has_badge –ø—Ä–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–µ popular
- `(promo, date, event_type)` - –∫—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ usage_7d —á–µ—Ä–µ–∑ JOIN —Å DailyAgg
- `(is_active, expires_at, -created_at)` - –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã API —Å–ø–∏—Å–∫–æ–≤

**–ù–∏–∫–∞–∫–∏—Ö –¥—É–±–ª–µ–π –º–∏–≥—Ä–∞—Ü–∏–π:** –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å 0013_add_performance_indexes

**–ö–æ–º–º–∏—Ç:** `feat(db): add indexes for popular ordering (no duplicates)`

---

### D2. –°–∏–¥-—Å–∫—Ä–∏–ø—Ç seed_demo

#### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–§–∞–π–ª:** `backend/core/management/commands/seed_demo.py`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 500 –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤, 50 –º–∞–≥–∞–∑–∏–Ω–æ–≤, 5000 —Å–æ–±—ã—Ç–∏–π
python manage.py seed_demo

# –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
python manage.py seed_demo --promos 1000 --stores 100 --events 10000

# –° –æ—á–∏—Å—Ç–∫–æ–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
python manage.py seed_demo --promos 1000 --stores 100 --clear
```

**–ß—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç:**

1. **10 –∫–∞—Ç–µ–≥–æ—Ä–∏–π** (–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞, –û–¥–µ–∂–¥–∞, –î–æ–º, –ö—Ä–∞—Å–æ—Ç–∞, –°–ø–æ—Ä—Ç, –ü—Ä–æ–¥—É–∫—Ç—ã, –ö–Ω–∏–≥–∏, –ò–≥—Ä—É—à–∫–∏, –ê–≤—Ç–æ, –£—Å–ª—É–≥–∏)

2. **–ú–∞–≥–∞–∑–∏–Ω—ã (–¥–æ 100):** Ozon, Wildberries, Yandex Market, Lamoda, Citilink, Mvideo, Eldorado, DNS, KFC, McDonald's, Sberbank, Tinkoff, –∏ –¥—Ä.
   - –†–µ–π—Ç–∏–Ω–≥: 3.5-5.0 (random)
   - site_url: `https://{slug}.example.com`

3. **–ü—Ä–æ–º–æ–∫–æ–¥—ã (–¥–æ 1000):**
   - `offer_type`: coupon (—Å –∫–æ–¥–æ–º), deal, financial, cashback
   - `discount`: 5%, 10%, 15%, 20%, 25%, 30%, 40%, 50%
   - `expires_at`: –æ—Ç -30 –¥–Ω–µ–π –¥–æ +90 –¥–Ω–µ–π (–µ—Å—Ç—å –∏—Å—Ç–µ–∫—à–∏–µ –∏ –∞–∫—Ç–∏–≤–Ω—ã–µ)
   - `is_hot`: 15% –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
   - `is_recommended`: 10% –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
   - `views_count`: 0-1000 (random)
   - `categories`: 1-3 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞ –ø—Ä–æ–º–æ–∫–æ–¥

4. **–°–æ–±—ã—Ç–∏—è (—Å—ã—Ä—ã–µ Event, 10% –æ—Ç events_count)** + **DailyAgg** (100%):
   - –¢–∏–ø—ã: view, copy, click
   - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π
   - –ê–≥—Ä–µ–≥–∞—Ü–∏—è –≤ DailyAgg —Å –ø–æ–¥—Å—á—ë—Ç–æ–º count –∏ unique_count

**–í—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:**
```
============================================================
‚úì –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
============================================================
  –ö–∞—Ç–µ–≥–æ—Ä–∏–π: 10
  –ú–∞–≥–∞–∑–∏–Ω–æ–≤: 50
  –ü—Ä–æ–º–æ–∫–æ–¥–æ–≤: 1000
  –°–æ–±—ã—Ç–∏–π (—Å—ã—Ä—ã—Ö): 500
  DailyAgg: 8735
============================================================
```

**–ö–æ–º–º–∏—Ç:** `feat(ops): add seed_demo command for 500-1000 promos with events`

---

## E. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –¢–µ—Å—Ç-—Å—Ü–µ–Ω–∞—Ä–∏–π 1: –ê–≤—Ç–æ–≥–æ—Ä—è—á–∏–µ

```bash
python manage.py seed_demo --promos 100
python manage.py update_auto_hot
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü—Ä–æ–º–æ–∫–æ–¥—ã —Å `expires_at < now + 72h` –∏ `clicks_7d > 0` –ø–æ–ª—É—á–∏–ª–∏ `is_hot=True`
- –ò—Å—Ç–µ–∫—à–∏–µ –∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ—Ç–µ—Ä—è–ª–∏ —Ñ–ª–∞–≥ is_hot

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ:**
- –û—Ç–∫—Ä—ã—Ç—å `/hot`
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–º–µ—é—Ç —Ç–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞
- –û—Ç–∫—Ä—ã—Ç—å –≥–ª–∞–≤–Ω—É—é ‚Üí —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ç–∞–π–º–µ—Ä –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –æ–±—ã—á–Ω—ã—Ö PromoCard

---

### ‚úÖ –¢–µ—Å—Ç-—Å—Ü–µ–Ω–∞—Ä–∏–π 2: –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ Popular

```bash
# API –∑–∞–ø—Ä–æ—Å
curl "http://127.0.0.1:8000/api/v1/promocodes/?ordering=popular&limit=20"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–ø–æ—Ä—è–¥–æ–∫):**
1. –ü—Ä–æ–º–æ–∫–æ–¥—ã —Å `is_hot=True` –∏–ª–∏ `is_recommended=True`
2. –ó–∞—Ç–µ–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é `usage_7d`
3. –ó–∞—Ç–µ–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é `created_at`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ü–µ—Ä–≤—ã–µ 3-5 –æ—Ñ—Ñ–µ—Ä–æ–≤ –∏–º–µ—é—Ç –±–µ–π–¥–∂–∏ (üî• –∏–ª–∏ ‚≠ê)
- –î–∞–ª–µ–µ –∏–¥—É—Ç –æ—Ñ—Ñ–µ—Ä—ã —Å –∫–ª–∏–∫–∞–º–∏/–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
- –í –∫–æ–Ω—Ü–µ - —Å–≤–µ–∂–∏–µ –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

### ‚úÖ –¢–µ—Å—Ç-—Å—Ü–µ–Ω–∞—Ä–∏–π 3: –î—Ä—É–≥–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ—Ç –º–∞–≥–∞–∑–∏–Ω–∞

```bash
# –û—Ç–∫—Ä—ã—Ç—å –ª—é–±–æ–π –æ—Ñ—Ñ–µ—Ä
http://localhost:3000/promo/123
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–µ–∫—Ü–∏—è "–î—Ä—É–≥–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ—Ç [–º–∞–≥–∞–∑–∏–Ω]" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ 12 –æ—Ñ—Ñ–µ—Ä–æ–≤
- –í—Å–µ –æ—Ñ—Ñ–µ—Ä—ã –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç —Ç–æ–º—É –∂–µ –º–∞–≥–∞–∑–∏–Ω—É
- –¢–µ–∫—É—â–∏–π –æ—Ñ—Ñ–µ—Ä –∏—Å–∫–ª—é—á—ë–Ω
- –ü–æ—Ä—è–¥–æ–∫: badges ‚Üí usage_7d ‚Üí freshness

---

### ‚úÖ –¢–µ—Å—Ç-—Å—Ü–µ–Ω–∞—Ä–∏–π 4: –ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–π CSV

**–§–∞–π–ª:** `test_partner.csv`
```csv
store_name,offer,conditions,date
Ozon,SAVE20,–°–∫–∏–¥–∫–∞ –Ω–∞ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑,2025-12-31
Wildberries,–†–∞—Å–ø—Ä–æ–¥–∞–∂–∞ –¥–æ 50%,–¢–æ–ª—å–∫–æ —Å–µ–≥–æ–¥–Ω—è,31.12.2025
FakeStore,TEST10,Test conditions,2025-12-31
```

**–®–∞–≥–∏:**
1. –ê–¥–º–∏–Ω–∫–∞ ‚Üí –ü—Ä–æ–º–æ–∫–æ–¥—ã ‚Üí –ò–º–ø–æ—Ä—Ç
2. –í—ã–±—Ä–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å "–ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–π CSV"
3. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–ø—Ä–µ–≤—å—é):**
- ‚úÖ –°—Ç—Ä–æ–∫–∞ 1 (Ozon): –∑–µ–ª—ë–Ω–∞—è, offer_type=coupon, ‚ö†Ô∏è affiliate_url –ø—É—Å—Ç–æ–π
- ‚úÖ –°—Ç—Ä–æ–∫–∞ 2 (Wildberries): –∑–µ–ª—ë–Ω–∞—è, offer_type=deal, ‚ö†Ô∏è affiliate_url –ø—É—Å—Ç–æ–π
- ‚ùå –°—Ç—Ä–æ–∫–∞ 3 (FakeStore): –∫—Ä–∞—Å–Ω–∞—è, "–ú–∞–≥–∞–∑–∏–Ω 'FakeStore' –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ –º–∞–≥–∞–∑–∏–Ω –ø–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º."

---

### ‚úÖ –¢–µ—Å—Ç-—Å—Ü–µ–Ω–∞—Ä–∏–π 5: –ù–∞–≥—Ä—É–∑–∫–∞ 500-1000 –æ—Ñ—Ñ–µ—Ä–æ–≤

```bash
python manage.py seed_demo --promos 1000 --stores 100 --events 10000
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**

1. **API latency:**
   ```bash
   curl -w "@curl-format.txt" "http://127.0.0.1:8000/api/v1/promocodes/?ordering=popular&limit=12"
   ```
   **–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è:** < 200ms

2. **–§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥:**
   - –û—Ç–∫—Ä—ã—Ç—å –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
   - –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç—å –¥–æ –≤–∏—Ç—Ä–∏–Ω
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Å–∫—Ä–æ–ª–ª –ø–ª–∞–≤–Ω—ã–π (–Ω–µ—Ç –ø—Ä–æ–ø—É—Å–∫–æ–≤ FPS)

3. **–ö–∞—Ä—É—Å–µ–ª–∏:**
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∫–∞—Ä—É—Å–µ–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ
   - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Å–ª–∞–π–¥–∞–º–∏ –ø–ª–∞–≤–Ω–æ–µ

---

## –°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### Backend

1. **`backend/core/tasks.py`** (+55 —Å—Ç—Ä–æ–∫)
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–¥–∞—á–∞ `update_auto_hot_promos()`

2. **`backend/core/management/commands/update_auto_hot.py`** (–Ω–æ–≤—ã–π —Ñ–∞–π–ª, 68 —Å—Ç—Ä–æ–∫)
   - Management-–∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ–≥–æ—Ä—è—á–∏—Ö

3. **`backend/core/filters.py`** (+42 —Å—Ç—Ä–æ–∫–∏)
   - –†–∞—Å—à–∏—Ä–µ–Ω `PromoCodeOrderingFilter` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ `ordering=popular`

4. **`backend/core/views.py`** (3 –∏–∑–º–µ–Ω–µ–Ω–∏—è)
   - PromoCodeListView: –¥–æ–±–∞–≤–ª–µ–Ω 'popular' –≤ ordering_fields
   - CategoryPromocodesView: –¥–æ–±–∞–≤–ª–µ–Ω 'popular' –≤ ordering_fields
   - StorePromocodesView: –¥–æ–±–∞–≤–ª–µ–Ω 'popular' –≤ ordering_fields

5. **`backend/core/admin_import.py`** (+140 —Å—Ç—Ä–æ–∫)
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `parse_date_flexible()`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è "–ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–π CSV"
   - –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ –æ—Ñ—Ñ–µ—Ä–∞ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º

6. **`backend/core/migrations/0014_add_popular_ordering_indexes.py`** (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
   - 3 –Ω–æ–≤—ã—Ö —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

7. **`backend/core/management/commands/seed_demo.py`** (–Ω–æ–≤—ã–π —Ñ–∞–π–ª, 244 —Å—Ç—Ä–æ–∫–∏)
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Frontend

8. **`frontend/src/lib/api.ts`** (—Å—Ç—Ä–æ–∫–∏ 751-806)
   - `getRelatedPromocodes()`: –∏–∑–º–µ–Ω–µ–Ω–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ `popular`, –ª–∏–º–∏—Ç –Ω–∞ 12

---

## –ö–æ–º–º–∏—Ç—ã

```bash
feat(hot): add auto-hot logic (expires <72h + clicks growth)
feat(api): add 'popular' ordering (badges ‚Üí usage_7d ‚Üí freshness)
fix(promos): 'other offers from store' uses popular ordering, limit 12
feat(import): add 'Partner CSV' profile with 4 fields and smart type detection
feat(db): add indexes for popular ordering (no duplicates)
feat(ops): add seed_demo command for 500-1000 promos with events
```

---

## –ò—Ç–æ–≥–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é

- **A1:** –ê–≤—Ç–æ–≥–æ—Ä—è—á–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã (Celery –∑–∞–¥–∞—á–∞ + management –∫–æ–º–∞–Ω–¥–∞)
- **A2:** –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ "popular" (badges ‚Üí usage_7d ‚Üí freshness)
- **B:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ "–¥—Ä—É–≥–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ—Ç –º–∞–≥–∞–∑–∏–Ω–∞"
- **C:** –ü—Ä–æ—Ñ–∏–ª—å –∏–º–ø–æ—Ä—Ç–∞ "–ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–π CSV" —Å 4 –ø–æ–ª—è–º–∏
- **D1:** –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –º–∞—Å—à—Ç–∞–±–∞ 500-1000 –æ—Ñ—Ñ–µ—Ä–æ–≤
- **D2:** –ö–æ–º–∞–Ω–¥–∞ seed_demo –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### üìä –ú–µ—Ç—Ä–∏–∫–∏

- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 8
- **–ù–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤:** 4
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~650+
- **–ö–æ–º–º–∏—Ç–æ–≤:** 6
- **–ò–Ω–¥–µ–∫—Å–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω–æ:** 3

### üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –¥–µ–ø–ª–æ—é

–í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã. –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø—Ä–µ–¥–ø—Ä–æ–¥–∞–∫—à–Ω-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞ –¥–∞–Ω–Ω—ã—Ö 500-1000 –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤.

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. `python manage.py migrate` - –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
2. `python manage.py seed_demo --promos 1000 --stores 100` - —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
3. `python manage.py update_auto_hot` - –æ–±–Ω–æ–≤–∏—Ç—å –∞–≤—Ç–æ–≥–æ—Ä—è—á–∏–µ
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Celery Beat –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ `update_auto_hot_promos` (–∫–∞–∂–¥—ã–π —á–∞—Å)

---

**–û—Ç—á—ë—Ç —Å–æ—Å—Ç–∞–≤–ª–µ–Ω:** 2025-10-05
**–ê–≤—Ç–æ—Ä:** Claude Code
